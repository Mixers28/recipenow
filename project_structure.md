# Complete Project Structure

This document shows the complete file structure for the Multi-Agent Workflow extension.

## Files Provided (Starter Code)

```
multi-agent-workflow/
â”œâ”€â”€ ğŸ“„ package.json                    âœ… PROVIDED
â”œâ”€â”€ ğŸ“„ tsconfig.json                   âœ… PROVIDED
â”œâ”€â”€ ğŸ“„ .gitignore                      âœ… PROVIDED
â”œâ”€â”€ ğŸ“„ .eslintrc.json                  âœ… PROVIDED
â”œâ”€â”€ ğŸ“„ .vscodeignore                   âœ… PROVIDED
â”œâ”€â”€ ğŸ“„ README.md                       âœ… PROVIDED
â”œâ”€â”€ ğŸ“„ SETUP.md                        âœ… PROVIDED
â”œâ”€â”€ ğŸ“„ PROJECT_STRUCTURE.md            âœ… PROVIDED (this file)
â”‚
â”œâ”€â”€ ğŸ“ .vscode/
â”‚   â”œâ”€â”€ ğŸ“„ launch.json                 âœ… PROVIDED
â”‚   â””â”€â”€ ğŸ“„ tasks.json                  âœ… PROVIDED
â”‚
â”œâ”€â”€ ğŸ“ src/
â”‚   â”œâ”€â”€ ğŸ“„ extension.ts                âœ… PROVIDED - Main entry point
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ types/
â”‚   â”‚   â””â”€â”€ ğŸ“„ WorkflowTypes.ts        âœ… PROVIDED - All interfaces & enums
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ utils/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Logger.ts               âœ… PROVIDED - Logging utility
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ConfigManager.ts        âœ… PROVIDED - Settings management
â”‚   â”‚   â””â”€â”€ ğŸ“„ FileSystem.ts           âš ï¸  TO IMPLEMENT
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ agents/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ base/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ BaseAgent.ts        âš ï¸  TO IMPLEMENT
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ AgentMessage.ts     âš ï¸  TO IMPLEMENT
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ BrainstormAgent.ts      âš ï¸  TO IMPLEMENT
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ArchitectAgent.ts       âš ï¸  TO IMPLEMENT
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ CoderAgent.ts           âš ï¸  TO IMPLEMENT
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ReviewerAgent.ts        âš ï¸  TO IMPLEMENT
â”‚   â”‚   â””â”€â”€ ğŸ“„ QAAgent.ts              âš ï¸  TO IMPLEMENT
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ orchestrator/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ WorkflowOrchestrator.ts âš ï¸  TO IMPLEMENT
â”‚   â”‚   â””â”€â”€ ğŸ“„ StateManager.ts         âš ï¸  TO IMPLEMENT
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ llm/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ClaudeClient.ts         âš ï¸  TO IMPLEMENT
â”‚   â”‚   â””â”€â”€ ğŸ“„ PromptTemplates.ts      âš ï¸  TO IMPLEMENT
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ ui/
â”‚       â”œâ”€â”€ ğŸ“„ WorkflowPanel.ts        âš ï¸  TO IMPLEMENT
â”‚       â””â”€â”€ ğŸ“ webview/
â”‚           â”œâ”€â”€ ğŸ“„ index.html          âš ï¸  TO IMPLEMENT
â”‚           â”œâ”€â”€ ğŸ“„ styles.css          âš ï¸  TO IMPLEMENT
â”‚           â””â”€â”€ ğŸ“„ main.js             âš ï¸  TO IMPLEMENT
â”‚
â”œâ”€â”€ ğŸ“ resources/
â”‚   â”œâ”€â”€ ğŸ“„ workflow-icon.svg           âš ï¸  TO CREATE (optional)
â”‚   â””â”€â”€ ğŸ“ webview/                    âš ï¸  TO CREATE (optional assets)
â”‚
â”œâ”€â”€ ğŸ“ out/                            (Generated by TypeScript compiler)
â”‚   â””â”€â”€ (compiled .js files)
â”‚
â””â”€â”€ ğŸ“ node_modules/                   (Generated by npm install)
    â””â”€â”€ (dependencies)
```

## File Count Summary

- âœ… **Provided**: 15 files
- âš ï¸  **To Implement**: 15 files
- **Total**: 30 files (excluding generated files)

## Implementation Priority

### Phase 1: Foundation (Complete âœ…)
- [x] Project configuration
- [x] TypeScript setup
- [x] VS Code extension scaffolding
- [x] Type definitions
- [x] Basic utilities (Logger, ConfigManager)

### Phase 2: Core Infrastructure (Next)
1. **StateManager.ts** - Database operations for persistence
2. **ClaudeClient.ts** - Anthropic API integration
3. **PromptTemplates.ts** - System prompts for agents
4. **FileSystem.ts** - File operations helper

### Phase 3: Agent System
5. **BaseAgent.ts** - Abstract agent with common functionality
6. **AgentMessage.ts** - Communication protocol
7. **Individual Agents** - Specialized agent implementations

### Phase 4: Orchestration
8. **WorkflowOrchestrator.ts** - Main workflow controller

### Phase 5: User Interface
9. **WorkflowPanel.ts** - Webview panel controller
10. **Webview UI** - HTML/CSS/JS for visualization

## Size Estimates

Estimated lines of code per file:

| File | Est. LOC | Complexity |
|------|----------|------------|
| StateManager.ts | 300-400 | Medium |
| WorkflowOrchestrator.ts | 500-600 | High |
| ClaudeClient.ts | 200-250 | Medium |
| PromptTemplates.ts | 400-500 | Low |
| BaseAgent.ts | 200-250 | Medium |
| BrainstormAgent.ts | 150-200 | Medium |
| ArchitectAgent.ts | 150-200 | Medium |
| CoderAgent.ts | 200-250 | High |
| ReviewerAgent.ts | 150-200 | Medium |
| QAAgent.ts | 150-200 | Medium |
| WorkflowPanel.ts | 300-400 | Medium |
| FileSystem.ts | 150-200 | Low |
| Webview UI | 500-600 | Medium |

**Total estimated**: ~4,000-5,000 LOC for complete implementation

## Dependencies Installed

### Production Dependencies
```json
{
  "@anthropic-ai/sdk": "^0.32.1",
  "better-sqlite3": "^9.2.2"
}
```

### Development Dependencies
```json
{
  "@types/vscode": "^1.85.0",
  "typescript": "^5.3.3",
  "@typescript-eslint/*": "^6.19.0",
  "eslint": "^8.56.0",
  "mocha": "^10.2.0"
}
```

## Database Schema (for StateManager)

When implementing StateManager, you'll need these tables:

```sql
-- Workflows table
CREATE TABLE workflows (
  id TEXT PRIMARY KEY,
  state TEXT NOT NULL,
  idea TEXT NOT NULL,
  data TEXT NOT NULL,  -- JSON serialized WorkflowContext
  created_at INTEGER NOT NULL,
  updated_at INTEGER NOT NULL
);

-- Messages table
CREATE TABLE messages (
  id TEXT PRIMARY KEY,
  workflow_id TEXT NOT NULL,
  from_agent TEXT NOT NULL,
  to_agent TEXT NOT NULL,
  type TEXT NOT NULL,
  payload TEXT NOT NULL,  -- JSON
  timestamp INTEGER NOT NULL,
  FOREIGN KEY (workflow_id) REFERENCES workflows(id)
);

-- Events table (for audit trail)
CREATE TABLE events (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  workflow_id TEXT NOT NULL,
  event_type TEXT NOT NULL,
  data TEXT NOT NULL,  -- JSON
  timestamp INTEGER NOT NULL,
  FOREIGN KEY (workflow_id) REFERENCES workflows(id)
);
```

## API Endpoints Used

### Anthropic API
- `POST https://api.anthropic.com/v1/messages`
  - Used by all agents to communicate with Claude
  - Requires: API key, model, messages, system prompt

## Configuration Schema

All settings in `package.json` â†’ `contributes.configuration.properties`:

```typescript
interface ExtensionConfig {
  anthropicApiKey: string;           // Required
  modelPreference: string;           // Default: claude-sonnet-4-20250514
  maxReviewIterations: number;       // Default: 5
  autoApprove: boolean;              // Default: false
  enableLogging: boolean;            // Default: true
}
```

## Extension Activation Events

- `onCommand:multiAgentWorkflow.start`
- `onView:multiAgentWorkflow.workflowView`

## Testing Structure (Future)

```
src/test/
â”œâ”€â”€ suite/
â”‚   â”œâ”€â”€ extension.test.ts
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”œâ”€â”€ BrainstormAgent.test.ts
â”‚   â”‚   â”œâ”€â”€ ArchitectAgent.test.ts
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ orchestrator/
â”‚   â”‚   â”œâ”€â”€ WorkflowOrchestrator.test.ts
â”‚   â”‚   â””â”€â”€ StateManager.test.ts
â”‚   â””â”€â”€ integration/
â”‚       â””â”€â”€ fullWorkflow.test.ts
â””â”€â”€ runTest.ts
```

## Next Steps

Refer to SETUP.md for getting started, then begin implementing files in the priority order shown above.

For each component implementation, refer back to the Architecture document for detailed specifications and prompt templates.